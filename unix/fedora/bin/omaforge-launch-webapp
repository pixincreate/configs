#!/bin/bash

# Force Brave for webapps for webapps (--app flag only works with Chromium-based browsers)
browser="brave-browser.desktop"

# Verify Brave is installed
if [[ ! -f "$HOME/.local/share/applications/$browser" ]] && [[ ! -f "/usr/share/applications/$browser" ]]; then
    echo "[ERROR] Brave browser not found. Webapps require Brave browser."
    echo "[ERROR] Install with: sudo dnf install brave-browser"
    exit 1
fi
exec setsid $(sed -n 's/^Exec=\([^ ]*\).*/\1/p' {~/.local,/usr}/share/applications/$browser 2>/dev/null | head -1) --app="$1" "${@:2}"
